{% extends "base.html" %}

{% block content %}

<style>
    p {
        font-family: 'DM Sans' !important;
        font-weight: 400;
        /* text-transform: uppercase !important;  */
        /* color: #016006  !important; */
    }
    
    h1, h2 {
        text-transform: uppercase !important;
    }

    .custom-button {
        align-content: flex-start !important;
        align-items: flex-start !important;
        background-color: #008705 !important;
        border-radius: 6px !important;
        display: flex !important;
        flex: none !important;
        flex-direction: row !important;
        flex-wrap: nowrap !important;
        gap: 10px !important;
        height: min-content !important;
        justify-content: flex-start !important;
        overflow: visible !important;
        padding: 12px 32px !important;
        text-decoration: none !important;
        position: relative !important;
        border: none !important;
        cursor: pointer !important;
    }

    .custom-button-box {
        flex: none !important;
        height: auto !important;
        position: relative !important;
        white-space: pre !important;
        width: 100% !important;
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
    }

    .custom-button-box p {
        font-family: 'Fugaz One', sans-serif !important;
        font-size: 20px !important; 
        font-weight: 700 !important; 
        text-transform: uppercase !important; 
        color: rgb(255, 222, 33) !important;
        display: inline-block !important;
        text-align: left !important;
        vertical-align: middle !important;
        padding: 18px !important;
        line-height: 1 !important;
        margin: 0 auto !important;
    }

    /* Table wrapper styles */
    .scrollable-table {
        flex: 1 !important;
        overflow-x: auto !important;
        width: 100% !important;
        text-align: center !important;
        padding-top: 20px !important;
    }
 
    /* Table styles */
    .scrollable-table table {
        width: 100% !important;
        border-collapse: separate !important; /* Ensures border-radius will work */
        border-spacing: 10px !important; /* Adds space between table cells */
        background-color: #006106 !important; /* Background for the entire table */
        border-radius: 15px !important; /* Rounds the corners of the table */
        padding: 10px !important;
        margin: auto !important; /* Centers the table */
    }
 
    /* Header cell styles */
    .scrollable-table th {
        background-color: #008703 !important;
        color: #FFDE21 !important;
        font-family: 'Fugaz One', sans-serif !important;
        font-size: 18px !important;
        padding: 10px !important;
        border-radius: 10px !important;
        text-transform: uppercase !important;
    }
 
    /* Body cell styles */
    .scrollable-table td {
        background-color: #F1EFEF !important;
        font-family: 'Fugaz One', sans-serif !important;
        font-weight: 700 !important;
        font-size: 18px !important;
        padding: 10px !important;
        border-radius: 10px !important;
        text-transform: uppercase !important;
        color: #006106 !important;
    }
 
    /* Odd rows */
    .scrollable-table tbody tr:nth-of-type(odd) td {
        background-color: #F1EFEF !important;
        color: #008703 !important;
    }
 
    /* Even rows */
    .scrollable-table tbody tr:nth-of-type(even) td {
        background-color: #F1EFEF !important;
        color: #008703 !important;
    }
</style>

<section id="profile-section">
    <h1>Welcome, {{ first_name }} {{ last_name }}</h1>

    <h2>Email:</h2>
    <p>{{ email }}</p>

    <h2>Credit Balance:</h2>
    <p>{{ credit_balance }}</p>

    <h2>Credits Won/Lost:</h2>
    <p>+{{ credits_won }} / -{{ credits_lost }}</p>

    <h2>Transaction History:</h2>
    <table class="scrollable-table">
        <thead>
            <tr>
                <th>Game</th>
                <th>Bet Type</th>
                <th>Credits Bet</th>
                <th>Outcome</th>
                <th>Payout</th>
            </tr>
        </thead>
        <tbody>
            {% for transaction in transaction_history %}
                <tr>
                    <td>{{ transaction.bet.game.home_team }} vs {{ transaction.bet.game.away_team }}</td>
                    <td>{{ transaction.bet.bet_type }}</td>
                    <td>{{ transaction.bet.credits_bet }}</td>
                    <td>{{ transaction.transaction_type }}</td>
                    <td>{{ transaction.credits_adjusted }}</td>
                </tr>
                {% empty %}
                    <tr><td colspan="5">No transactions yet.</td></tr>
                {% endfor %}
        </tbody>
    </table>

    <h2>Active Bets:</h2>
    <table class="scrollable-table">
        <thead>
            <tr>
                <th>Game</th>
                <th>Bet Type</th>
                <th>Credits Bet</th>
            </tr>
        </thead>
        <tbody>
            {% for bet in active_bets %}
                <tr>
                    <td>{{ bet.game.home_team }} vs {{ bet.game.away_team }}</td>
                    <td>{{ bet.bet_type }}: {{ bet.odds }}</td>
                    <td>{{ bet.credits_bet }}</td>
                </tr>
            {% empty %}
                <tr><td colspan="3">No active bets.</td></tr>
            {% endfor %}
        </tbody>
    </table>

    <form method="POST" action="{% url 'logout' %}">
        {% csrf_token %}
        <button type="submit" class="custom-button">
            <div class="custom-button-box">
                <p>Logout</p>
            </div>
        </button>
    </form>

    <p>In the future, I will add options to change username/email/password</p>
</section>

{% endblock %}

<!-- Information to put on profile page -->
<!-- User Info -->
    <!--  1. Username -->
    <!--  2. Email address -->
    <!--  3. First/last name -->
    <!--  4. Email updates status -->

<!-- Credit Balance -->
    <!-- 1. Current Credits -->
    <!-- 2. Credits won/lost -->
    <!-- 3. Transaction History -->

<!-- Active Bets -->
    <!-- 1. Game -->
    <!-- 2. Bet Type -->
    <!-- 3. Credits Bet -->
    <!-- 4. Odds -->
    <!-- 5. Potential Payout -->

<!-- Betting History -->
    <!-- 1. Game -->
    <!-- 2. Bet Type -->
    <!-- 3. Credits Bet -->
    <!-- 4. Outcome -->
    <!-- 5. Payout -->

<!-- Profile Actions -->
    <!-- Edit profile: name, email (maybe), password -->
    <!-- Logout -->